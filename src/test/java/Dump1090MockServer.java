import java.io.*;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.List;
import java.util.concurrent.TimeUnit;

public class Dump1090MockServer {

	private static final int PORT = 30003;

	private static final List<String> MESSAGES = List.of(
			"MSG,3,1,1,4BAA56,1,2025/12/20,14:31:16.243,2025/12/20,14:31:16.285,,33000,,,50.17238,18.38785,,,0,,0,0",
			"MSG,5,1,1,4BAA56,1,2025/12/20,14:31:16.252,2025/12/20,14:31:16.287,,33000,,,,,,,0,,0,",
			"MSG,8,1,1,4BAA56,1,2025/12/20,14:31:16.257,2025/12/20,14:31:16.288,,,,,,,,,,,,0",

			"MSG,3,1,1,4BAA56,1,2025/12/20,14:31:17.243,2025/12/20,14:31:17.285,,33000,,,50.18238,18.50000,,,0,,0,0",
			"MSG,5,1,1,4BAA56,1,2025/12/20,14:31:17.252,2025/12/20,14:31:17.287,,33000,,,,,,,0,,0,",
			"MSG,8,1,1,4BAA56,1,2025/12/20,14:31:17.257,2025/12/20,14:31:17.288,,,,,,,,,,,,0",

			"MSG,3,1,1,4BAA56,1,2025/12/20,14:31:18.243,2025/12/20,14:31:18.285,,33000,,,50.18238,18.91200,,,0,,0,0",
			"MSG,5,1,1,4BAA56,1,2025/12/20,14:31:18.252,2025/12/20,14:31:18.287,,33000,,,,,,,0,,0,",
			"MSG,8,1,1,4BAA56,1,2025/12/20,14:31:18.257,2025/12/20,14:31:18.288,,,,,,,,,,,,0",

			"MSG,3,1,1,489222,1,2025/12/20,14:31:16.260,2025/12/20,14:31:16.288,,16575,,,50.1500,18.3000,,,0,,0,0",
			"MSG,5,1,1,489222,1,2025/12/20,14:31:16.265,2025/12/20,14:31:16.290,,16575,,,,,,,0,,0,",
			"MSG,8,1,1,489222,1,2025/12/20,14:31:16.270,2025/12/20,14:31:16.295,,,,,,,,,,,,0",

			"MSG,3,1,1,489222,1,2025/12/20,14:31:17.260,2025/12/20,14:31:17.288,,16575,,,50.2600,18.5000,,,0,,0,0",
			"MSG,5,1,1,489222,1,2025/12/20,14:31:17.265,2025/12/20,14:31:17.290,,16575,,,,,,,0,,0,",
			"MSG,8,1,1,489222,1,2025/12/20,14:31:17.270,2025/12/20,14:31:17.295,,,,,,,,,,,,0",

			"MSG,3,1,1,489222,1,2025/12/20,14:31:18.260,2025/12/20,14:31:18.288,,16575,,,50.3000,18.7000,,,0,,0,0",
			"MSG,5,1,1,489222,1,2025/12/20,14:31:18.265,2025/12/20,14:31:18.290,,16575,,,,,,,0,,0,",
			"MSG,8,1,1,489222,1,2025/12/20,14:31:18.270,2025/12/20,14:31:18.295,,,,,,,,,,,,0",

			"MSG,3,1,1,4BAA57,1,2025/12/20,14:31:16.243,2025/12/20,14:31:16.285,,33000,,,50.17238,18.38785,,,0,,0,0",

			"MSG,3,1,1,4BAA59,1,2025/12/20,14:31:16.243,2025/12/20,14:31:16.285,,33000,,,50.17238,18.18785,,,0,,0,0",

			"MSG,3,1,1,4BAA58,1,2025/12/20,14:31:16.243,2025/12/20,14:31:16.285,,33000,,,50.17238,18.28785,,,0,,0,0",

			"MSG,3,1,1,4BAA51,1,2025/12/20,14:31:16.243,2025/12/20,14:31:16.285,,33000,,,50.37238,18.38785,,,0,,0,0",

			"MSG,3,1,1,4BA357,1,2025/12/20,14:31:16.243,2025/12/20,14:31:16.285,,33000,,,50.47238,18.38785,,,0,,0,0",

			"MSG,3,1,1,4BAA47,1,2025/12/20,14:31:16.243,2025/12/20,14:31:16.285,,33000,,,50.17238,18.58785,,,0,,0,0",

			"MSG,3,1,1,4B4A57,1,2025/12/20,14:31:16.243,2025/12/20,14:31:16.285,,33000,,,50.97238,18.38785,,,0,,0,0",

			"MSG,3,1,1,414A57,1,2025/12/20,14:31:16.243,2025/12/20,14:31:16.285,,33000,,,50.17238,18.98785,,,0,,0,0",

			"MSG,3,3,1,4B4A57,1,2025/12/20,14:31:16.243,2025/12/20,14:31:16.285,,33000,,,50.47238,18.28785,,,0,,0,0",

			"MSG,3,4,1,4B4A57,1,2025/12/20,14:31:16.243,2025/12/20,14:31:16.285,,33000,,,50.31238,18.383785,,,0,,0,0",

			"MSG,3,4,1,4B1A11,1,2025/12/20,14:31:16.243,2025/12/20,14:31:16.285,,33000,,,50.21238,18.583785,,,0,,0,0"


			);

	public static void main(String[] args) throws Exception {
		try (ServerSocket serverSocket = new ServerSocket(PORT)) {
			System.out.println("Mock dump1090 listening on port " + PORT);

			Socket client = serverSocket.accept();
			System.out.println("Client connected");

			BufferedWriter writer = new BufferedWriter(
					new OutputStreamWriter(client.getOutputStream())
			);

			while (true) {
				for (String msg : MESSAGES) {
					writer.write(msg);
					writer.newLine();
					writer.flush();

					TimeUnit.MILLISECONDS.sleep(500);
				}
			}
		}
	}
}